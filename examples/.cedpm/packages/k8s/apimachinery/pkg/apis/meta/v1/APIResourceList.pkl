//===----------------------------------------------------------------------===//
// Copyright Â© 2024 Apple Inc. and the Pkl project authors. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     https://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//===----------------------------------------------------------------------===//

/// APIResourceList is a list of APIResource, it is used to expose the name of the resources supported in a specific group and version, and if the resource is namespaced.
@ModuleInfo { minPklVersion = "0.25.0" }
open module k8s.apimachinery.pkg.apis.meta.v1.APIResourceList

extends ".../K8sResource.pkl"

fixed apiVersion: "v1"

fixed kind: "APIResourceList"

/// groupVersion is the group and version this APIResourceList is for.
groupVersion: String

/// resources contains the name of the resources and if they are namespaced.
resources: Listing<APIResource>

/// APIResource specifies the name of a resource and whether it is namespaced.
class APIResource {
  /// shortNames is a list of suggested short names of the resource.
  shortNames: Listing<String>?

  /// kind is the kind for the resource (e.g. 'Foo' is the kind for a resource 'foo')
  kind: String

  /// name is the plural name of the resource.
  name: String

  /// The hash value of the storage version, the version this resource is converted to when written to the data store.
  ///
  /// Value must be treated as opaque by clients.
  /// Only equality comparison on the value is valid.
  /// This is an alpha feature and may change or be removed in the future.
  /// The field is populated by the apiserver only if the StorageVersionHash feature gate is enabled.
  /// This field will remain optional even if it graduates.
  storageVersionHash: String?

  /// verbs is a list of supported kube verbs (this includes get, list, watch, create, update, patch, delete, deletecollection, and proxy)
  verbs: Listing<ApiRequestVerb>(isDistinct)

  /// categories is a list of the grouped resources this resource belongs to (e.g. 'all')
  categories: Listing<String>?

  /// version is the preferred version of the resource.
  ///
  /// Empty implies the version of the containing resource list For subresources, this may have a different value, for example: v1 (while inside a v1beta1 version of the core resource's group)".
  version: String?

  /// namespaced indicates if a resource is namespaced or not.
  namespaced: Boolean

  /// group is the preferred group of the resource.
  ///
  /// Empty implies the group of the containing resource list.
  /// For subresources, this may have a different value, for example: Scale".
  group: String?

  /// singularName is the singular name of the resource.
  ///
  /// This allows clients to handle plural and singular opaquely.
  /// The singularName is more correct for reporting status on a single item and both singular and plural are allowed from the kubectl CLI interface.
  singularName: String
}

